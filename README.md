## ulinks-rest

**ulinks-rest** is a simple RESTful API for link (URL) shortening, written in NodeJS.

This is intended to be used with a frontend but can also be used as a standalone API. I am currently using this API with a ReactJS frontend:
https://github.com/quoeradem/ulinks.li

### Setup 
---

**Database:**

ulinks-rest uses a MySQL database to store it's data. You can use the following to create the necessary table:

```sql
CREATE TABLE IF NOT EXISTS urls (
        id int UNSIGNED NOT NULL AUTO_INCREMENT,
        longurl varchar(2000),
        clicks int UNSIGNED DEFAULT 0,
        status varchar(20) DEFAULT "OK",
        created varchar(255),
        PRIMARY KEY(id)
    ) ENGINE=InnoDB AUTO_INCREMENT=0;
```

### Configuration
---

The configuration options are all set in the `config.json` file.

* __siteurl__: The URL for the frontend (_ex: https://example.tld/_).
* __mysql__: MySQL connection options

	(_note: I am using a socket to connect to MySQL but you can alternatively define a __host__ and __port__ to be used instead of a __socket__. You will also have to change the connection options in `ulinks-rest.js` as well. You can read more about the `node-mysql` options [here](https://github.com/felixge/node-mysql)_)

### Usage
---

**ulinks-rest** currently only supports 3 different API calls.

**Expand a short URL**

This method will expand any short URL that was previously generated by this API. For example, to expand `https://yourfrontend.tld/ba5e`, you could send the following request:

```
GET https://yourdomain.tld/urlshortener/url?shortUrl=https://yourfrontend.tld/ba5e
```

A successful response will look like:

```
"kind": "urlshortener#url",
"id": "https://yourfrontend.tld/ba5e",
"longUrl": "https://github.com/",
"status": "OK"
```

_Note: This method will not increment the click stats of the requested URL._


**Shorten a long URL**

This method will shorten any valid URL. For example, to shorten `https://github.com/`, you could send the following request:

```
POST https://yourdomain.tld/urlshortener/url
Content-Type: application/json

{"longUrl": "https://github.com/"}
```

A successful response will look like:

```
"kind": "urlshortener#url",
"id": "https://yourfrontend.tld/ba5e",
"longUrl": "https://github.com/",
```

**Return a short URL target (\*internal use only)**

**Note: This method is intended to be used only by a frontend application.**

This method is essentially the same as the above GET method to expand a short URL but will increment the click stats. A frontend can then use the response to redirect to the long URL. For example, to redirect to the target of `https://yourfrontend.tld/1A`, a frontend could send the following request:

```
PUT https://yourdomain.tld/urlshortener/url
Content-Type: application/json

{"id": "https://yourfrontend.tld/1A"}
```

A successful response will look like:

```
{
"kind": "urlshortener#url",
"id": "https://yourfrontend.tld/1A"
"longUrl": "https://github.com/",
"status": "OK",
}
```
The frontend can then redirect to the _longUrl_ from the response.

### License
---

**ulinks-rest** is licensed under The MIT License (MIT). A copy of this license has been included in `LICENSE`.

Copyright &copy; 2016 Trevor Kulhanek